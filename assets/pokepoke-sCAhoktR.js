var me=Object.defineProperty;var ke=(s,t,o)=>t in s?me(s,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[t]=o;var w=(s,t,o)=>ke(s,typeof t!="symbol"?t+"":t,o);import{r as L,a as B,j as e,B as v,i as ye,g as O,z,D as ve,f as M,u as V,U as je,b as W,k as H,E as Ce,F as Pe,G as ee,H as se,d as $,J as te,K as ge,N as _e,S as oe,n as Ie,o as j,L as F,q as S,s as G,t as Se,v as Te,y as we,R as Fe,M as Ne,w as Re,C as Ge,A as ze,x as Y}from"./theme-CHuPLSuQ.js";function re(s,t){return typeof s=="boolean"?s:t.autoContrast}var ae={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const $e=ae,ie=L.forwardRef(({__staticSelector:s,__stylesApiProps:t,className:o,classNames:r,styles:a,unstyled:c,children:n,label:i,description:d,id:m,disabled:l,error:k,size:h,labelPosition:p="left",bodyElement:x="div",labelElement:b="label",variant:u,style:y,vars:C,mod:g,..._},P)=>{const f=B({name:s,props:t,className:o,style:y,classes:ae,classNames:r,styles:a,unstyled:c});return e.jsx(v,{...f("root"),ref:P,__vars:{"--label-fz":ye(h),"--label-lh":O(h,"label-lh")},mod:[{"label-position":p},g],variant:u,size:h,..._,children:e.jsxs(v,{component:x,htmlFor:x==="label"?m:void 0,...f("body"),children:[n,e.jsxs("div",{...f("labelWrapper"),"data-disabled":l||void 0,children:[i&&e.jsx(v,{component:b,htmlFor:b==="label"?m:void 0,...f("label"),"data-disabled":l||void 0,children:i}),d&&e.jsx(z.Description,{size:h,__inheritStyles:!1,...f("description"),children:d}),k&&typeof k!="boolean"&&e.jsx(z.Error,{size:h,__inheritStyles:!1,...f("error"),children:k})]})]})})});ie.displayName="@mantine/core/InlineInput";const ce=L.createContext(null),Be=ce.Provider,ne=()=>L.useContext(ce),[Me,Ve]=ve();var le={card:"m_26775b0a"};const Ae={withBorder:!0},De=W((s,{radius:t})=>({card:{"--card-radius":H(t)}})),U=M((s,t)=>{const o=V("CheckboxCard",Ae,s),{classNames:r,className:a,style:c,styles:n,unstyled:i,vars:d,checked:m,mod:l,withBorder:k,value:h,onClick:p,...x}=o,b=B({name:"CheckboxCard",classes:le,props:o,className:a,style:c,classNames:r,styles:n,unstyled:i,vars:d,varsResolver:De,rootSelector:"card"}),u=ne(),y=typeof m=="boolean"?m:(u==null?void 0:u.value.includes(h||""))||!1;return e.jsx(Me,{value:{checked:y},children:e.jsx(je,{ref:t,mod:[{"with-border":k,checked:y},l],...b("card"),...x,role:"checkbox","aria-checked":y,onClick:C=>{p==null||p(C),u==null||u.onChange(h||"")}})})});U.displayName="@mantine/core/CheckboxCard";U.classes=le;function Ee({children:s,role:t}){const o=Ce();return o?e.jsx("div",{role:t,"aria-labelledby":o.labelId,"aria-describedby":o.describedBy,children:s}):e.jsx(e.Fragment,{children:s})}const Le={},X=M((s,t)=>{const{value:o,defaultValue:r,onChange:a,size:c,wrapperProps:n,children:i,readOnly:d,...m}=V("CheckboxGroup",Le,s),[l,k]=Pe({value:o,defaultValue:r,finalValue:[],onChange:a}),h=p=>{const x=typeof p=="string"?p:p.currentTarget.value;!d&&k(l.includes(x)?l.filter(b=>b!==x):[...l,x])};return e.jsx(Be,{value:{value:l,onChange:h,size:c},children:e.jsx(z.Wrapper,{size:c,ref:t,...n,...m,labelElement:"div",__staticSelector:"CheckboxGroup",children:e.jsx(Ee,{role:"group",children:i})})})});X.classes=z.Wrapper.classes;X.displayName="@mantine/core/CheckboxGroup";var de={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const Oe={icon:ee},We=W((s,{radius:t,color:o,size:r,iconColor:a,variant:c,autoContrast:n})=>{const i=se({color:o||s.primaryColor,theme:s}),d=i.isThemeColor&&i.shade===void 0?`var(--mantine-color-${i.color}-outline)`:i.color;return{indicator:{"--checkbox-size":O(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:H(t),"--checkbox-color":c==="outline"?d:$(o,s),"--checkbox-icon-color":a?$(a,s):re(n,s)?te({color:o,theme:s,autoContrast:n}):void 0}}}),Z=M((s,t)=>{const o=V("CheckboxIndicator",Oe,s),{classNames:r,className:a,style:c,styles:n,unstyled:i,vars:d,icon:m,indeterminate:l,radius:k,color:h,iconColor:p,autoContrast:x,checked:b,mod:u,variant:y,disabled:C,...g}=o,_=m,P=B({name:"CheckboxIndicator",classes:de,props:o,className:a,style:c,classNames:r,styles:n,unstyled:i,vars:d,varsResolver:We,rootSelector:"indicator"}),f=Ve(),D=typeof b=="boolean"||typeof l=="boolean"?b||l:(f==null?void 0:f.checked)||!1;return e.jsx(v,{ref:t,...P("indicator",{variant:y}),variant:y,mod:[{checked:D,disabled:C},u],...g,children:e.jsx(_,{indeterminate:l,...P("icon")})})});Z.displayName="@mantine/core/CheckboxIndicator";Z.classes=de;var he={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const He={labelPosition:"right",icon:ee},Ue=W((s,{radius:t,color:o,size:r,iconColor:a,variant:c,autoContrast:n})=>{const i=se({color:o||s.primaryColor,theme:s}),d=i.isThemeColor&&i.shade===void 0?`var(--mantine-color-${i.color}-outline)`:i.color;return{root:{"--checkbox-size":O(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:H(t),"--checkbox-color":c==="outline"?d:$(o,s),"--checkbox-icon-color":a?$(a,s):re(n,s)?te({color:o,theme:s,autoContrast:n}):void 0}}}),T=M((s,t)=>{const o=V("Checkbox",He,s),{classNames:r,className:a,style:c,styles:n,unstyled:i,vars:d,color:m,label:l,id:k,size:h,radius:p,wrapperProps:x,checked:b,labelPosition:u,description:y,error:C,disabled:g,variant:_,indeterminate:P,icon:f,rootRef:D,iconColor:ss,onChange:N,autoContrast:ts,mod:ue,...be}=o,I=ne(),fe=h||(I==null?void 0:I.size),pe=f,R=B({name:"Checkbox",props:o,classes:he,className:a,style:c,classNames:r,styles:n,unstyled:i,vars:d,varsResolver:Ue}),{styleProps:xe,rest:q}=ge(be),J=_e(k),K=I?{checked:I.value.includes(q.value),onChange:Q=>{I.onChange(Q),N==null||N(Q)}}:{};return e.jsx(ie,{...R("root"),__staticSelector:"Checkbox",__stylesApiProps:o,id:J,size:fe,labelPosition:u,label:l,description:y,error:C,disabled:g,classNames:r,styles:n,unstyled:i,"data-checked":K.checked||b||void 0,variant:_,ref:D,mod:ue,...xe,...x,children:e.jsxs(v,{...R("inner"),mod:{"data-label-position":u},children:[e.jsx(v,{component:"input",id:J,ref:t,checked:b,disabled:g,mod:{error:!!C,indeterminate:P},...R("input",{focusable:!0,variant:_}),onChange:N,...q,...K,type:"checkbox"}),e.jsx(pe,{indeterminate:P,...R("icon")})]})})});T.classes={...he,...$e};T.displayName="@mantine/core/Checkbox";T.Group=X;T.Indicator=Z;T.Card=U;const Xe=()=>{const s=A();return e.jsx(v,{children:e.jsx(T,{label:"特定のカードを当てたい",...s.getInputProps("isSpecific")})})},Ze=()=>{const s=A(),t=()=>{const o=[];for(let r=1;r<=30;r++)o.push(r.toString());for(let r=4;r<=10;r++)o.push((r*10).toString());return o};return e.jsx(v,{children:e.jsx(oe,{...s.getInputProps("packs"),label:"開封するパック数",data:t()})})},qe=()=>{const s=A();return e.jsx(v,{children:e.jsx(oe,{...s.getInputProps("rarity"),label:"レアリティ",data:[{value:"d1",label:"◇"},{value:"d2",label:"◇◇"},{value:"d3",label:"◇◇◇"},{value:"d4",label:"◇◇◇◇"},{value:"s1",label:"☆"},{value:"s2",label:"☆☆"},{value:"s3",label:"☆☆☆"},{value:"k1",label:"👑"}]})})};class Je{constructor(t,o){w(this,"probabilityTable",{d1:{first3:100,fourth:0,fifth:0},d2:{first3:0,fourth:90,fifth:60},d3:{first3:0,fourth:5,fifth:20},d4:{first3:0,fourth:1.666,fifth:6.664},s1:{first3:0,fourth:2.572,fifth:10.288},s2:{first3:0,fourth:.5,fifth:2},s3:{first3:0,fourth:.222,fifth:.888},k1:{first3:0,fourth:.04,fifth:.16}});w(this,"specificProbabilityTable",{d1:{first3:2,fourth:0,fifth:0},d2:{first3:0,fourth:2.571,fifth:1.714},d3:{first3:0,fourth:.357,fifth:1.428},d4:{first3:0,fourth:.333,fifth:1.332},s1:{first3:0,fourth:.321,fifth:1.286},s2:{first3:0,fourth:.055,fifth:.222},s3:{first3:0,fourth:.222,fifth:.888},k1:{first3:0,fourth:.013,fifth:.053}});w(this,"rarity");w(this,"packs");this.rarity=t,this.packs=o}binomialDistribution(t,o,r){return Ie(t,o)*(r/100)**o*(1-r/100)**(t-o)}getPackProbability(t){const r=(t?this.specificProbabilityTable:this.probabilityTable)[this.rarity],a=1-(1-r.first3/100)**3,c=r.fourth/100,n=r.fifth/100;return 1-(1-a)*(1-c)*(1-n)}getAtLeastOneProbability(t=!1){const o=this.getPackProbability(t);return Math.round((1-(1-o)**this.packs)*1e3)/1e3}getZeroProbability(t=!1){const o=this.getPackProbability(t);return Math.round((1-o)**this.packs*1e3)/1e3}getExactlyXProbability(t,o=!1){if(t>this.packs)return 0;const r=this.getPackProbability(o);return Math.round(this.binomialDistribution(this.packs,t,r*100)*1e3)/1e3}getAtLeastXProbability(t,o=!1){if(t>this.packs)return 0;let r=0;const a=this.getPackProbability(o);for(let c=t;c<=this.packs;c++)r+=this.binomialDistribution(this.packs,c,a*100);return Math.round(r*1e3)/1e3}getPacksNeededForProbability(t,o=!1){const r=this.getPackProbability(o);return Math.ceil(Math.log(1-t/100)/Math.log(1-r))}}const E=s=>`${Se(s*100,2)}%`;function Ke(){const s=A(),t=new Je(s.values.rarity,Number(s.values.packs));if(!s.isValid())return e.jsx(e.Fragment,{});const o=[0,1,2,3,4,5].map((r,a)=>e.jsxs(j.Tr,{children:[e.jsx(j.Td,{children:r}),e.jsx(j.Td,{children:E(t.getExactlyXProbability(r,s.values.isSpecific))})]},a));return e.jsxs(e.Fragment,{children:[e.jsxs(F,{spacing:4,mb:"sm",center:!0,children:[e.jsx(F.Item,{children:e.jsxs(S,{fz:"xl",children:["1回以上当たる確率は",e.jsx(S,{component:"span",fw:"bold",c:"red",children:E(t.getAtLeastOneProbability(s.values.isSpecific))})]})}),e.jsx(F.Item,{mb:"sm",children:e.jsxs(S,{fz:"xl",children:["全て外れる確率は",e.jsx(S,{component:"span",fw:"bold",children:E(t.getZeroProbability(s.values.isSpecific))})]})}),[50,70,95].map((r,a)=>e.jsxs(F.Item,{children:[r,"%の人は",e.jsx(S,{component:"span",fw:"bold",children:t.getPacksNeededForProbability(r,s.values.isSpecific)}),"パック開ければ1回は当たる"]},a)),e.jsxs(F.Item,{children:["1%の人は",e.jsx(S,{component:"span",fw:"bold",c:"red",children:t.getPacksNeededForProbability(99,s.values.isSpecific)}),"パック開けても全て外れる🤪"]})]}),e.jsx(G,{h:"md"}),e.jsxs(j,{stickyHeader:!0,stickyHeaderOffset:60,striped:!0,withTableBorder:!0,withColumnBorders:!0,withRowBorders:!1,children:[e.jsx(j.Thead,{children:e.jsxs(j.Tr,{children:[e.jsx(j.Th,{children:"当たる回数"}),e.jsx(j.Th,{children:"確率"})]})}),e.jsx(j.Tbody,{children:o})]})]})}const[Qe,A,Ye]=Te();function es(){const s=Ye({initialValues:{rarity:"d4",packs:"1",isSpecific:!1}});return e.jsx(Qe,{form:s,children:e.jsxs(v,{mx:"auto",component:"form",maw:400,children:[e.jsx(qe,{}),e.jsx(G,{h:"md"}),e.jsx(Ze,{}),e.jsx(G,{h:"md"}),e.jsx(Xe,{}),e.jsx(G,{h:"md"}),e.jsx(Ke,{})]})})}we.createRoot(document.getElementById("root")).render(e.jsx(Fe.StrictMode,{children:e.jsx(Ne,{theme:Re,children:e.jsxs(Ge,{children:[e.jsx(ze,{href:"/",children:e.jsx(Y,{mt:"md",order:2,children:"ポケポケ ガチャシュミレーター"})}),e.jsx(Y,{order:6,mb:"md",c:"dimmed",children:"ポケポケのガチャの確率を計算します。"}),e.jsx(es,{})]})})}));
